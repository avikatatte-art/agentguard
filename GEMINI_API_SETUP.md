# üîë Gemini 3 API Setup Guide

## Get Your Gemini API Key

### Step 1: Visit Google AI Studio
Go to: https://aistudio.google.com/apikey

### Step 2: Sign In
- Sign in with your Google account
- Accept the terms of service if prompted

### Step 3: Create API Key
1. Click **"Get API Key"** or **"Create API Key"**
2. Select a Google Cloud project (or create a new one)
3. Click **"Create API Key in new project"** or select existing project
4. Copy the API key (starts with `AIza...`)

### Step 4: Add to Backend
1. Navigate to `backend/` folder
2. Create a `.env` file (copy from `.env.example`):
   ```bash
   cd backend
   cp .env.example .env
   ```

3. Edit `.env` and add your API key:
   ```
   API_HOST=0.0.0.0
   API_PORT=8000
   GEMINI_API_KEY=AIzaSy...your_actual_key_here
   ```

### Step 5: Restart Backend
```bash
cd backend
source venv/bin/activate  # On Windows: venv\Scripts\activate
python main.py
```

## Verify Integration

### Check API Status
Visit: http://localhost:8000/

You should see:
```json
{
  "message": "AgentGuard API",
  "version": "1.0.0",
  "status": "running"
}
```

### Test Gemini Integration
1. Open frontend: http://localhost:3002
2. Click "Scan Demo Dataset"
3. Look for `"gemini_available": true` in the response
4. Navigate through all 4 screens
5. On Screen 4 (Playbook), you should see:
   - **Gemini Analysis** section with AI-generated insights
   - **Recovery steps** generated by Gemini 3
   - **Evidence reasoning** powered by AI

## What Gemini 3 Powers

### 1. Incident Analysis
- Root cause identification
- Severity assessment
- Blast radius explanation
- Business impact estimation

### 2. Recovery Playbook Generation
- Step-by-step recovery plan
- Verification checks per step
- Rollback procedures
- Escalation contacts

### 3. Evidence Reasoning
- Dependency confidence scoring
- Risk assessment explanations
- Historical pattern analysis

### 4. Risk Explanations
- Why agents have specific risk scores
- SPOF detection reasoning
- Centrality analysis

## Fallback Behavior

**Important:** If no API key is provided, the system will:
- ‚úÖ Still work with mock data
- ‚úÖ Generate realistic playbooks
- ‚ö†Ô∏è Show `"gemini_available": false`
- ‚ö†Ô∏è Use pre-defined templates instead of AI generation

This ensures the demo works even without API access!

## API Limits & Pricing

### Free Tier (Gemini 3 Flash)
- **60 requests per minute**
- **1,500 requests per day**
- **1 million tokens per minute**

Perfect for hackathon demos and development!

### Model Used
- **Model**: `gemini-2.0-flash-exp`
- **Speed**: Fast responses (1-3 seconds)
- **Quality**: High-quality reasoning and generation

## Troubleshooting

### Error: "API key not valid"
- Check that you copied the full key (starts with `AIza`)
- Ensure no extra spaces in `.env` file
- Verify the key is enabled in Google Cloud Console

### Error: "Quota exceeded"
- You've hit the free tier limit
- Wait for the quota to reset (per minute/day)
- Or upgrade to paid tier in Google Cloud

### Gemini not being used
- Check backend logs for errors
- Verify `.env` file exists in `backend/` folder
- Restart the backend server
- Check `gemini_available` in scan response

## Security Best Practices

### ‚úÖ DO:
- Keep API key in `.env` file (gitignored)
- Use environment variables
- Rotate keys periodically

### ‚ùå DON'T:
- Commit API keys to GitHub
- Share keys publicly
- Hardcode keys in source code

## For Production Deployment

When deploying to Vercel/Railway/Render:

1. **Add environment variable** in deployment settings:
   - Variable name: `GEMINI_API_KEY`
   - Value: Your API key

2. **Verify in deployment logs**:
   - Look for "Gemini model initialized"
   - Check `gemini_available` status

3. **Monitor usage**:
   - Google Cloud Console ‚Üí APIs & Services ‚Üí Quotas
   - Set up alerts for quota limits

---

## Quick Test Commands

```bash
# Test scan endpoint
curl http://localhost:8000/api/scan -X POST -H "Content-Type: application/json" -d '{"demo_type": "ecommerce"}'

# Check if Gemini is available (look for gemini_available: true)
curl http://localhost:8000/api/scan -X POST -H "Content-Type: application/json" -d '{"demo_type": "ecommerce"}' | grep gemini_available
```

---

**Need Help?** Check the [Gemini API Documentation](https://ai.google.dev/docs)
